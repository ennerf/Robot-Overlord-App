include required("/stdlib/jdk/19/openjdk.conf")
include required("/stdlib/jvm/enhancements/client/v1.conf")
conveyor.compatibility-level = 4

app {

  // App information
  vendor = "MarginallyClever"
  display-name = "RobotOverlord"
  description = "Robot Overlord is 3D control software for robots."
  fsname = robot-overlord
  long-fsname = robot-overlord
  rdns-name = marginallyclever-${app.fsname}
  version = 1.9.0
  revision = 0

  // JVM Config
  jvm.gui.main-class = com.marginallyclever.robotoverlord.RobotOverlord
  jvm.options = [
    "-Dlog.useHomeDir=true"
  ]
  windows.console = true // easier for debugging

  // required modules. auto-'detect' has issues with the uber-jar
  jvm.modules = [java.base,java.desktop,java.management,java.naming,java.prefs,java.security.jgss,java.sql,jdk.unsupported,jdk.zipfs,jdk.crypto.ec]

  // Resources / Dependencies
  icons = "src/main/resources/logo-*" // requires size 2^n
  inputs = [
    "target/RobotOverlord-*-with-dependencies.jar"
    // "target/lib/*.jar" // using individual jars would be better than an uber-jar for delta updates
    ${app.icons}
  ]

  // Jinput binaries
  windows.inputs += "jinput*.dll"
  linux.inputs += "libjinput-linux*.so"
  mac.amd64.inputs += "libjinput-osx*.jnilib"

  // Supported target platforms
  machines = [
    "linux.amd64.glibc",
    "windows.amd64"
    //"mac.amd64", // disabled because libjinput-osx.dylib is missing
    //"mac.aarch64" // wouldn't work because there are no binaries for aarch64
  ]

  // Release using GitHub Releases
  site.base-url = github.com/MarginallyClever/Robot-Overlord-App/releases/latest/download
  vcs-url = github.com/MarginallyClever/Robot-Overlord-App
  license = GPL 2.0

}